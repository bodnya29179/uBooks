TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `after_books_insert` AFTER INSERT ON `books` FOR EACH ROW BEGIN\n	SET @isbn_count = (SELECT COUNT(BookID) FROM books WHERE (ISBN = NEW.ISBN) OR (BookAuthor = NEW.BookAuthor AND BookTitle = NEW.BookTitle AND PublicationYear = NEW.PublicationYear));\n    SET @quantity_count = (SELECT COUNT(BookID) FROM books WHERE books.Quantity < 0);\n	IF @isbn_count > 1 THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Book with this data exists!\';\n	END IF;\n    IF NEW.PublicationYear > YEAR(NOW()) THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Year is greater than today!\';\n	END IF;\n    IF @quantity_count > 0 THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Quantity must be less zero!\';\n	END IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `after_books_update` AFTER UPDATE ON `books` FOR EACH ROW BEGIN\n        SET @quantity_count = (SELECT COUNT(BookID) FROM books WHERE books.Quantity < 0);	\n        SET @count = (SELECT COUNT(BookID) FROM books WHERE (ISBN = NEW.ISBN) OR (BookAuthor = NEW.BookAuthor AND BookTitle = NEW.BookTitle AND PublicationYear = NEW.PublicationYear));\n	IF @count > 1 THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Book with this data exists!\';\n	END IF;\n        IF NEW.PublicationYear > YEAR(NOW()) THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Year is greater than today!\';\n	END IF;\n        IF @quantity_count > 0 THEN\n	SIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'Quantity must be less zero!\';\n	END IF;\nEND'
sql_modes=1342177280 1342177280
definers='root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
db_cl_names='utf8_unicode_ci' 'utf8_unicode_ci'
